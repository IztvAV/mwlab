# üì¶ `mwlab.cli.pack_dataset`

CLI‚Äë—É—Ç–∏–ª–∏—Ç–∞ –¥–ª—è —É–ø–∞–∫–æ–≤–∫–∏ –∫–æ–ª–ª–µ–∫—Ü–∏–∏ Touchstone‚Äë—Ñ–∞–π–ª–æ–≤ (`*.sNp`) –≤ –µ–¥–∏–Ω—ã–π HDF5‚Äë–∫–æ–Ω—Ç–µ–π–Ω–µ—Ä.

–ü–æ–ª–µ–∑–Ω–æ –¥–ª—è –ø–æ–¥–≥–æ—Ç–æ–≤–∫–∏ –¥–∞—Ç–∞—Å–µ—Ç–æ–≤ –ø–µ—Ä–µ–¥ –æ–±—É—á–µ–Ω–∏–µ–º, –æ—Å–æ–±–µ–Ω–Ω–æ –µ—Å–ª–∏ –ø–ª–∞–Ω–∏—Ä—É–µ—Ç—Å—è –∏—Å–ø–æ–ª—å–∑–æ–≤–∞–Ω–∏–µ `TouchstoneTensorDataset` –∏–ª–∏ `HDF5Backend`.

---

## üöÄ –ü—Ä–∏–º–µ—Ä –∏—Å–ø–æ–ª—å–∑–æ–≤–∞–Ω–∏—è

```bash
python -m mwlab.cli.pack_dataset \
    --src raw_data/ \
    --dst train.h5 \
    --pattern "*.s2p"
```

–≠—Ç–∞ –∫–æ–º–∞–Ω–¥–∞ —É–ø–∞–∫—É–µ—Ç –≤—Å–µ `.s2p`‚Äë—Ñ–∞–π–ª—ã –∏–∑ –¥–∏—Ä–µ–∫—Ç–æ—Ä–∏–∏ `raw_data/` –≤ —Ñ–∞–π–ª `train.h5`.

---

## üßæ –ê—Ä–≥—É–º–µ–Ω—Ç—ã –∫–æ–º–∞–Ω–¥–Ω–æ–π —Å—Ç—Ä–æ–∫–∏

| –ê—Ä–≥—É–º–µ–Ω—Ç       | –û–ø–∏—Å–∞–Ω–∏–µ                                               |
|----------------|--------------------------------------------------------|
| `--src`        | –ü—É—Ç—å –∫ –¥–∏—Ä–µ–∫—Ç–æ—Ä–∏–∏ —Å –∏—Å—Ö–æ–¥–Ω—ã–º–∏ `.sNp`‚Äë—Ñ–∞–π–ª–∞–º–∏           |
| `--dst`        | –ü—É—Ç—å –∫ –≤—ã—Ö–æ–¥–Ω–æ–º—É `.h5`‚Äë—Ñ–∞–π–ª—É                           |
| `--pattern`    | rglob‚Äë—à–∞–±–ª–æ–Ω –ø–æ–∏—Å–∫–∞ —Ñ–∞–π–ª–æ–≤ (–ø–æ —É–º–æ–ª—á–∞–Ω–∏—é: `"*.s?p"`)    |

---

## ‚öôÔ∏è –ß—Ç–æ –¥–µ–ª–∞–µ—Ç —Å–∫—Ä–∏–ø—Ç?

1. –ó–∞–≥—Ä—É–∂–∞–µ—Ç –≤—Å–µ —Ñ–∞–π–ª—ã `.sNp` –∏–∑ —É–∫–∞–∑–∞–Ω–Ω–æ–π –¥–∏—Ä–µ–∫—Ç–æ—Ä–∏–∏;
2. –ü—Ä–µ–æ–±—Ä–∞–∑—É–µ—Ç –∫–∞–∂–¥—ã–π —Ñ–∞–π–ª –≤ `TouchstoneData`;
3. –°–æ—Ö—Ä–∞–Ω—è–µ—Ç –∏—Ö –ø–æ–æ—á–µ—Ä–µ–¥–Ω–æ –≤ `HDF5Backend` (—Å—Ç—Ä—É–∫—Ç—É—Ä–∞ `/samples/0`, `/samples/1`, ...);
4. –ü–æ–∫–∞–∑—ã–≤–∞–µ—Ç –ø—Ä–æ–≥—Ä–µ—Å—Å‚Äë–±–∞—Ä —á–µ—Ä–µ–∑ `tqdm`.

---

## üìÅ –°—Ç—Ä—É–∫—Ç—É—Ä–∞ –≤—ã—Ö–æ–¥–Ω–æ–≥–æ —Ñ–∞–π–ª–∞

```
train.h5
‚îî‚îÄ‚îÄ /samples/
    ‚îú‚îÄ‚îÄ 0/
    ‚îú‚îÄ‚îÄ 1/
    ‚îú‚îÄ‚îÄ ...
    ‚îî‚îÄ‚îÄ N/
```

–ö–∞–∂–¥–∞—è –≥—Ä—É–ø–ø–∞ —Å–æ–¥–µ—Ä–∂–∏—Ç:

- S‚Äë–º–∞—Ç—Ä–∏—Ü—É (`s`, `f`, `z0`)
- –ú–µ—Ç–∞–¥–∞–Ω–Ω—ã–µ (`unit`, `s_def`, `comments`)
- –ü–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª—å—Å–∫–∏–µ –ø–∞—Ä–∞–º–µ—Ç—Ä—ã (–∫–∞–∫ `attrs`)

---

## üß© –°–æ–≤–º–µ—Å—Ç–∏–º–æ—Å—Ç—å

HDF5‚Äë—Ñ–∞–π–ª –º–æ–∂–Ω–æ –Ω–∞–ø—Ä—è–º—É—é –∏—Å–ø–æ–ª—å–∑–æ–≤–∞—Ç—å –≤:

- `TouchstoneDataset`
- `TouchstoneTensorDataset`
- –ê–Ω–∞–ª–∏—Ç–∏–∫–µ –∏–ª–∏ –≤–∏–∑—É–∞–ª–∏–∑–∞—Ü–∏–∏ —Å –ø–æ–º–æ—â—å—é `h5py`, `pandas`, `matplotlib`

---

## üì¶ –°–æ–≤–µ—Ç—ã

- –†–µ–∫–æ–º–µ–Ω–¥—É–µ—Ç—Å—è –≤—ã–∑—ã–≤–∞—Ç—å —Å `python -m` –¥–ª—è –∫–æ—Ä—Ä–µ–∫—Ç–Ω–æ–≥–æ –ø–æ–∏—Å–∫–∞ –º–æ–¥—É–ª–µ–π;
- –£–±–µ–¥–∏—Ç–µ—Å—å, —á—Ç–æ —Å—Ç—Ä—É–∫—Ç—É—Ä–∞ —Ñ–∞–π–ª–æ–≤ –∫–æ—Ä—Ä–µ–∫—Ç–Ω–∞ (–Ω–∞–ø—Ä–∏–º–µ—Ä, –Ω–∞–ª–∏—á–∏–µ `! Parameters = {...}` –Ω–µ –æ–±—è–∑–∞—Ç–µ–ª—å–Ω–æ, –Ω–æ –∂–µ–ª–∞—Ç–µ–ª—å–Ω–æ);
- –ú–æ–∂–Ω–æ –∏—Å–ø–æ–ª—å–∑–æ–≤–∞—Ç—å `--pattern "*.s3p"` –¥–ª—è –º–Ω–æ–≥–æ–ø–æ—Ä—Ç–æ–≤—ã—Ö —É—Å—Ç—Ä–æ–π—Å—Ç–≤.