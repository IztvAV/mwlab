# üì° `mwlab.io.touchstone`

–ú–æ–¥—É–ª—å `mwlab.io.touchstone` –ø—Ä–µ–¥–æ—Å—Ç–∞–≤–ª—è–µ—Ç –∫–ª–∞—Å—Å `TouchstoneData` ‚Äî —É–¥–æ–±–Ω—ã–π –∫–æ–Ω—Ç–µ–π–Ω–µ—Ä –¥–ª—è —Ä–∞–±–æ—Ç—ã —Å S‚Äë–ø–∞—Ä–∞–º–µ—Ç—Ä–∞–º–∏, –ø–æ—Å—Ç—Ä–æ–µ–Ω–Ω—ã–π –ø–æ–≤–µ—Ä—Ö `skrf.Network`. –ü–æ–¥–¥–µ—Ä–∂–∏–≤–∞–µ—Ç –∑–∞–≥—Ä—É–∑–∫—É/—Å–æ—Ö—Ä–∞–Ω–µ–Ω–∏–µ Touchstone‚Äë—Ñ–∞–π–ª–æ–≤ –∏ —Å–µ—Ä–∏–∞–ª–∏–∑–∞—Ü–∏—é –≤ —Ñ–æ—Ä–º–∞—Ç NumPy‚Äë—Å–ª–æ–≤–∞—Ä–µ–π.

---

## üß± –°—Ç—Ä—É–∫—Ç—É—Ä–∞

### `TouchstoneData` —Å–æ–¥–µ—Ä–∂–∏—Ç:

- `network` ‚Äî –æ–±—ä–µ–∫—Ç `skrf.Network`
- `params` ‚Äî —Å–ª–æ–≤–∞—Ä—å –ø–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª—å—Å–∫–∏—Ö –ø–∞—Ä–∞–º–µ—Ç—Ä–æ–≤ (`dict[str, float|str]`)
- `path` ‚Äî –ø—É—Ç—å –∫ –∏—Å—Ö–æ–¥–Ω–æ–º—É —Ñ–∞–π–ª—É (–µ—Å–ª–∏ –∑–∞–¥–∞–Ω)

---

## üì• –ó–∞–≥—Ä—É–∑–∫–∞ –∏–∑ —Ñ–∞–π–ª–∞

```python
from mwlab.io.touchstone import TouchstoneData

ts = TouchstoneData.load("Data/sample.s2p")
print(ts.params)     # –ø–∞—Ä–∞–º–µ—Ç—Ä—ã –∏–∑ "! Parameters = {...}"
print(ts.network)    # skrf.Network
```

---

## üíæ –°–æ—Ö—Ä–∞–Ω–µ–Ω–∏–µ –≤ —Ñ–∞–π–ª

```python
ts.save("out_dir/new_sample.s2p")
```

–ü—Ä–∏ —ç—Ç–æ–º –±—É–¥–µ—Ç –¥–æ–±–∞–≤–ª–µ–Ω–∞ —Å—Ç—Ä–æ–∫–∞ `! Parameters = {...}` –≤ –Ω–∞—á–∞–ª–æ —Ñ–∞–π–ª–∞.

---

## üì¶ –°–æ–∑–¥–∞–Ω–∏–µ —Å –Ω—É–ª—è

```python
import skrf as rf
import numpy as np

f = rf.Frequency(1, 10, 5, "GHz")
s = np.zeros((5, 2, 2), dtype=complex)
net = rf.Network(frequency=f, s=s)

ts = TouchstoneData(network=net, params={"w": 1.2, "gap": 0.3})
```

---

## üîÅ –°–µ—Ä–∏–∞–ª–∏–∑–∞—Ü–∏—è –≤ NumPy-—Å–ª–æ–≤–∞—Ä—å

```python
dct = ts.to_numpy()
```

–ö–ª—é—á–∏:

- `"s"` ‚Äì S‚Äë–º–∞—Ç—Ä–∏—Ü–∞: `(F, P, P)` complex64
- `"f"` ‚Äì —á–∞—Å—Ç–æ—Ç—ã: `(F,)` float64
- `"meta/unit"`, `"meta/z0"`, `"meta/s_def"` ‚Äî –º–µ—Ç–∞–¥–∞–Ω–Ω—ã–µ —Å–µ—Ç–∏
- `"meta/comments"` ‚Äî –∫–æ–º–º–µ–Ω—Ç–∞—Ä–∏–∏ (–µ—Å–ª–∏ –µ—Å—Ç—å)
- `"param/<key>"` ‚Äî –ø–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª—å—Å–∫–∏–µ –ø–∞—Ä–∞–º–µ—Ç—Ä—ã

–ú–æ–∂–Ω–æ –∏—Å–ø–æ–ª—å–∑–æ–≤–∞—Ç—å –¥–ª—è —Ö—Ä–∞–Ω–µ–Ω–∏—è –≤ HDF5, LMDB –∏ –¥—Ä.

---

## ‚Ü©Ô∏è –í–æ—Å—Å—Ç–∞–Ω–æ–≤–ª–µ–Ω–∏–µ –∏–∑ —Å–ª–æ–≤–∞—Ä—è

```python
ts2 = TouchstoneData.from_numpy(dct)
```

---

## üß† –ò–∑–≤–ª–µ—á–µ–Ω–∏–µ –ø–∞—Ä–∞–º–µ—Ç—Ä–æ–≤

–ü–æ–¥–¥–µ—Ä–∂–∏–≤–∞—é—Ç—Å—è –ø–∞—Ä–∞–º–µ—Ç—Ä—ã –∏–∑ —Å—Ç—Ä–æ–∫–∏:

```text
! Parameters = {w=1.2; gap=0.3}
```

–û–Ω–∏ –∏–∑–≤–ª–µ–∫–∞—é—Ç—Å—è –∫–∞–∫:

- –∏–∑ `network.comments`
- –ª–∏–±–æ –Ω–∞–ø—Ä—è–º—É—é –∏–∑ —Ñ–∞–π–ª–∞ (`_params_from_file`)

---

## üß™ –ü—Ä–∏–º–µ—Ä –∏—Å–ø–æ–ª—å–∑–æ–≤–∞–Ω–∏—è —Å HDF5

```python
d = ts.to_numpy()

import h5py
with h5py.File("sample.h5", "w") as f:
    for k, v in d.items():
        f.create_dataset(k, data=v)

# —á—Ç–µ–Ω–∏–µ –æ–±—Ä–∞—Ç–Ω–æ
with h5py.File("sample.h5", "r") as f:
    d2 = {k: f[k][()] for k in f}
    ts2 = TouchstoneData.from_numpy(d2)
```

---

## üß™ –¢–µ—Å—Ç–∏—Ä–æ–≤–∞–Ω–∏–µ

–ü–æ–∫—Ä—ã–≤–∞–µ—Ç—Å—è:

- –∑–∞–≥—Ä—É–∑–∫–∞ –∏ —Å–æ—Ö—Ä–∞–Ω–µ–Ω–∏–µ Touchstone‚Äë—Ñ–∞–π–ª–æ–≤;
- –∏–∑–≤–ª–µ—á–µ–Ω–∏–µ –ø–∞—Ä–∞–º–µ—Ç—Ä–æ–≤ –∏–∑ –∫–æ–º–º–µ–Ω—Ç–∞—Ä–∏–µ–≤;
- —Å–µ—Ä–∏–∞–ª–∏–∑–∞—Ü–∏—è –∏ –≤–æ—Å—Å—Ç–∞–Ω–æ–≤–ª–µ–Ω–∏–µ —á–µ—Ä–µ–∑ `.to_numpy()` / `.from_numpy()`;
- round-trip –∫–æ—Ä—Ä–µ–∫—Ç–Ω–æ—Å—Ç—å (`s`, `f`, `params`, `unit`, ...).